# Luogu离线题库

**目前只爬了P题**，好像没什么用（不过你可以自己改），而且我也不知道我做这个干什么（为了装逼？）......~~相比起其他写爬虫的人，我实在太弱了~~

### 离线题库使用说明

这个章节适合那些只想用(wu)用(liao)题(tou)库(ding)的童鞋食用

首先，你需要准备一个服务器（或者自家电脑），已经安装好这些东西

* Apache或Nginx
* Mysql（5.6版本最佳，因为我用的是5.6的）
* PHP（最好是PHP7,因为旧版本没有测试过，可能有不可预知的错误）

如果没有安装好，可以通过宝塔面板或者LAMP或者LNMP或者......自己编译？（我真的没有打广告）

然后，你需要把仓库Clone下来

```shell
git clone https://github.com/wenxuanjun/Luogu-Clawer.git
```

此离线题库所有的文件都放在了Web目录下，所以没有其他需求的童鞋可以把其他文件夹删了~~（因为我不会单独Clone一个文件夹）~~

Web/luogu目录下有一个luogu.sql.gz文件，需要把它导入Mysql数据库（**建议新建一个数据库，因为我没试过导入原有数据库会不会覆盖所有内容**），里面包含了所有的题面（别问我为什么要用Mysql，~~因为它又小又快速还支持索引~~）

然后修改Web/mysql.php，把里面的数据库信息修改一下，就算弄好了！

访问index.html就可以看到题目列表（界面丑陋，大神勿喷）

### TODO

* A题，CF题的获取
* 自动修复题面（现在需要手动用fix.py修复）
* 链接转换
* 按相似度查找题目（虽然数据库索引都建好了，但还是没来的及实现）
* RemoteJudge ~~（大雾）~~

### 此爬虫的实现

爬虫用Shell和Python3实现，由两部分组成

* get.sh-->收集器（从Luogu上Get网页源代码，~~其实就是wget~~）
* go.py-->转换器（把源代码转换后传到数据库）

网页由PHP和Mysql实现，采用Bootstrap4做UI

* index.php （显示题面）
* list.php （生成列表）
* mysql.php (查询数据库并返回数据)
* head.php （index.php的head标签，因为嫌index.php太长所以就单独拿出来了）

### 最后

至于代码，不仅不美观而且很可能有问题，~~因为作者很制杖~~

若真的有问题，请提交issue
